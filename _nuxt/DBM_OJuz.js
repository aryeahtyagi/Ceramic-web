import{_ as x,l as C,u as L,e as N,m as M,c as r,a as e,k as A,t as u,n as V,p,v as c,F as q,h as _,j as v,o as i}from"./BP8Zqz1I.js";import{u as B}from"./9Frihcan.js";const E={class:"login-page"},S={class:"login-wrapper"},U={class:"login-container"},j={class:"login-header"},P={class:"login-title"},D={class:"login-subtitle"},z={class:"form-group"},F={class:"input-wrapper"},R=["disabled"],T={class:"form-group"},I=["disabled"],J={class:"form-group"},W=["disabled"],Z={class:"form-group"},G=["disabled"],H={class:"form-group"},K=["disabled"],O={key:1,class:"error-message",role:"alert"},Q=["disabled"],X={key:0},Y={key:1,class:"loading-spinner"},$={class:"toggle-mode"},ee=["disabled"],se={key:0},oe={key:1},te={__name:"login",async setup(ae){let g,b;const k=C(),h=L(),m=B(),t=v(!1),a=v(!1),d=v(""),o=v({phoneNumber:"",username:"",email:"",address:"",pincode:""}),f=N(()=>{const n=k.query.redirect;return n&&typeof n=="string"?n:"/collections"}),y=()=>{t.value=!t.value,d.value="",t.value||(o.value.username="",o.value.email="",o.value.address="",o.value.pincode="")},w=async()=>{d.value="",a.value=!0;try{if(t.value)await m.signup({username:o.value.username,phoneNumber:o.value.phoneNumber,email:o.value.email,address:o.value.address,pincode:o.value.pincode});else if(!await m.login(o.value.phoneNumber)){d.value="No account found with this phone number. Please sign up.",t.value=!0,a.value=!1;return}await h.push(f.value)}catch(n){d.value=n?.message||n?.data?.message||"Something went wrong. Please try again."}finally{a.value=!1}};return m.isAuthenticated.value&&([g,b]=M(()=>h.push(f.value)),await g,b()),(n,s)=>(i(),r("div",E,[s[15]||(s[15]=e("div",{class:"login-background"},[e("div",{class:"login-background-pattern"})],-1)),e("div",S,[e("div",U,[e("div",j,[s[5]||(s[5]=A('<div class="login-icon" data-v-d6973cd4><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d6973cd4><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d6973cd4></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d6973cd4></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d6973cd4></path></svg></div>',1)),e("h1",P,u(t.value?"Create Account":"Welcome Back"),1),e("p",D,u(t.value?"Join us to discover handcrafted ceramics":"Enter your phone number to continue shopping"),1)]),e("form",{onSubmit:V(w,["prevent"]),class:"login-form"},[e("div",z,[s[7]||(s[7]=e("label",{for:"phone",class:"form-label"},[e("span",{class:"label-text"},"Phone Number"),e("span",{class:"required"},"*")],-1)),e("div",F,[s[6]||(s[6]=e("span",{class:"input-prefix"},"+91",-1)),p(e("input",{id:"phone","onUpdate:modelValue":s[0]||(s[0]=l=>o.value.phoneNumber=l),type:"tel",class:"form-input",placeholder:"Enter your phone number",required:"",disabled:a.value,autocomplete:"tel",maxlength:"10"},null,8,R),[[c,o.value.phoneNumber]])])]),t.value?(i(),r(q,{key:0},[e("div",T,[s[8]||(s[8]=e("label",{for:"username",class:"form-label"},[e("span",{class:"label-text"},"Username"),e("span",{class:"required"},"*")],-1)),p(e("input",{id:"username","onUpdate:modelValue":s[1]||(s[1]=l=>o.value.username=l),type:"text",class:"form-input",placeholder:"Choose a username",required:"",disabled:a.value,autocomplete:"username"},null,8,I),[[c,o.value.username]])]),e("div",J,[s[9]||(s[9]=e("label",{for:"email",class:"form-label"},[e("span",{class:"label-text"},"Email Address"),e("span",{class:"required"},"*")],-1)),p(e("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=l=>o.value.email=l),type:"email",class:"form-input",placeholder:"Enter your email",required:"",disabled:a.value,autocomplete:"email"},null,8,W),[[c,o.value.email]])]),e("div",Z,[s[10]||(s[10]=e("label",{for:"address",class:"form-label"},[e("span",{class:"label-text"},"Address")],-1)),p(e("input",{id:"address","onUpdate:modelValue":s[3]||(s[3]=l=>o.value.address=l),type:"text",class:"form-input",placeholder:"Enter your address",disabled:a.value,autocomplete:"street-address"},null,8,G),[[c,o.value.address]])]),e("div",H,[s[11]||(s[11]=e("label",{for:"pincode",class:"form-label"},[e("span",{class:"label-text"},"Pincode")],-1)),p(e("input",{id:"pincode","onUpdate:modelValue":s[4]||(s[4]=l=>o.value.pincode=l),type:"text",class:"form-input",placeholder:"Enter your pincode",disabled:a.value,autocomplete:"postal-code",maxlength:"6"},null,8,K),[[c,o.value.pincode]])])],64)):_("",!0),d.value?(i(),r("div",O,[s[12]||(s[12]=e("svg",{class:"error-icon",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("span",null,u(d.value),1)])):_("",!0),e("button",{type:"submit",class:"submit-btn",disabled:a.value},[a.value?(i(),r("span",Y,[...s[13]||(s[13]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4","stroke-opacity":"0.25"}),e("path",{d:"M12 2C6.477 2 2 6.477 2 12",stroke:"currentColor","stroke-width":"4","stroke-linecap":"round"})],-1)])])):(i(),r("span",X,u(t.value?"Create Account":"Continue"),1))],8,Q)],32),e("div",$,[s[14]||(s[14]=e("div",{class:"toggle-divider"},[e("span")],-1)),e("button",{type:"button",class:"toggle-btn",onClick:y,disabled:a.value},[t.value?(i(),r("span",se,"Already have an account?")):(i(),r("span",oe,"Don't have an account?")),e("strong",null,u(t.value?"Login":"Sign up"),1)],8,ee)])])])]))}},re=x(te,[["__scopeId","data-v-d6973cd4"]]);export{re as default};
