import{_ as lt}from"./BrXzo5Im.js";import{u as rt,_ as it}from"./DmoxZqux.js";import{_ as ut}from"./DMDdKpbA.js";import{_ as ct,l as vt,h as u,s as V,q as dt,u as pt,c as o,a,b as F,w as Me,e as D,t as v,f as p,x as Se,y as x,F as A,r as N,T as mt,g as c,o as l,n as De,z as Y,j as gt}from"./BymtEYvB.js";import{u as ft}from"./BAdZQPZD.js";import{u as ht}from"./NMJN9T_Y.js";import{u as yt}from"./Bbg1cLgB.js";import{u as se}from"./j9dONU5i.js";const bt={class:"product-page"},wt={class:"topbar"},kt={class:"topbar-actions"},_t={key:0,class:"cart-badge","aria-label":"Cart items"},Ct={class:"content"},Mt={key:0,class:"loading"},St={key:1,class:"error"},Dt={key:2,class:"product"},$t={class:"media"},xt=["src","alt","loading","fetchpriority"],At={key:0,class:"image-nav"},Nt={key:1,class:"image-indicators"},Pt=["onClick","aria-label"],It={key:2,class:"discount-badge"},Rt={class:"info"},Tt={class:"product-name"},zt={class:"rating-section"},Lt={class:"stars"},Bt={key:0,class:"reviews-text"},Ut={key:1,class:"reviews-text"},Xt={class:"price-section"},Et={class:"price"},Vt={key:0,class:"original-price"},Ft={key:1,class:"qty-total"},Yt={class:"quantity-section"},Ot={class:"quantity-controls"},qt={class:"qty-value"},Zt={key:0,class:"description-section"},Wt={class:"description-text"},Ht={key:1,class:"features-section"},Qt={class:"features-list"},jt={class:"expandable-sections"},Gt={class:"toggle-icon"},Jt={key:0,class:"section-content"},Kt={class:"specifications-table"},ea={class:"spec-label"},ta={class:"spec-value"},aa={class:"toggle-icon"},sa={key:0,class:"section-content"},na=["src","alt"],oa={key:0,class:"toast",role:"status","aria-live":"polite"},$e=50,la={__name:"[slug]",setup(ra){const P=vt(),xe=ft(),O=gt(),I=u(()=>String(O.public.apiBase||"").replace(/\/$/,"")),Ae=u(()=>String(P.params.slug||"")),ne=u(()=>{const e=Ae.value.match(/-(\d+)$/);return e?e[1]:null}),{data:q,pending:Ne,error:Pe,refresh:Ie}=ht(()=>`/collections/${ne.value}`,{baseURL:I,immediate:u(()=>!!ne.value)},"$4z1QZ99mEd"),Re=u(()=>q.value&&typeof q.value=="object"?q.value:null),Z=e=>String(e||"").trim().toLowerCase().replace(/\s+/g," "),Te=e=>{const t=Z(e);return t?t.includes("plate")?"plates":t.includes("bowl")?"bowls":t.includes("mug")||t.includes("cup")?"mugs":t.includes("vase")?"vases":null:null},ze=e=>{const s=(Array.isArray(e?.productDetails)?e.productDetails:[]).find(n=>Z(n?.dimension?.name)==="type");return Te(s?.value)},oe=e=>e==="vases"?"/images/ceramic-vase.svg":e==="mugs"?"/images/ceramic-mug.svg":e==="bowls"?"/images/ceramic-bowl.svg":"/images/ceramic-plate.svg",Le=e=>{const t=String(e||"").trim();return t?!!t.includes("img.icons8.com"):!1},R=e=>{const t=String(e||"").trim();if(!t||Le(t))return"";if(t.includes("localhost:9090")||t.includes("localhost:"))try{const s=new URL(t),n=s.pathname+s.search;return`${I.value}${n}`}catch{const s=t.match(/localhost:\d+(\/.*)/);return s?`${I.value}${s[1]}`:t}return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/")?`${I.value}${t}`:t},Be=e=>{const t=e?.image?.value;if(t)return R(t);const s=Array.isArray(e?.images)?e.images:[],n=s.find(d=>d?.catalogImage);return n?.imageUrl?R(n.imageUrl):s[0]?.imageUrl?R(s[0].imageUrl):""},i=u(()=>{const e=Re.value;if(!e)return null;const t=e?.name||"Ceramic Product",s=ze(e)||"plates";return{id:e?.id,name:t,description:e?.description||"",about:e?.about||"",price:Number(e?.price||0),category:s,discounts:e?.discounts||null,benefits:Array.isArray(e?.benefits)?e.benefits:[],lovePoints:Array.isArray(e?.productLovePoints)?e.productLovePoints:[],productDetails:Array.isArray(e?.productDetails)?e.productDetails:[],images:Array.isArray(e?.images)?e.images:[],hero:Be(e)}}),m=u(()=>{const e=i.value;if(!e)return[];const t=[];e.hero&&t.push(e.hero);for(const s of e.images){const n=R(s?.imageUrl);n&&t.push(n)}return Array.from(new Set(t))}),k=c("/images/ceramic-plate.svg"),g=c(0);V(()=>{const e=i.value;if(!e)return;const t=m.value[0]||oe(e.category);k.value=t,g.value=0}),dt(g,e=>{m.value[e]&&(k.value=m.value[e])});const T=c(0),W=c(0),le=c(0),re=c(0),y=c(!1),ie=c(0),_=c(0),Ue=e=>{T.value=e.touches[0].clientX,W.value=e.touches[0].clientY,y.value=!0},Xe=e=>{if(!y.value)return;e.preventDefault();const t=e.touches[0].clientX,s=e.touches[0].clientY,n=t-T.value,d=s-W.value;Math.abs(n)>Math.abs(d)&&(_.value=n)},Ee=e=>{if(!y.value)return;le.value=e.changedTouches[0].clientX,re.value=e.changedTouches[0].clientY;const t=le.value-T.value,s=Math.abs(t),n=Math.abs(re.value-W.value);s>n&&s>$e&&(t>0?L():z()),y.value=!1,_.value=0},Ve=e=>{y.value=!0,ie.value=e.clientX,T.value=e.clientX},Fe=e=>{if(!y.value)return;const t=e.clientX-ie.value;_.value=t},ue=()=>{if(!y.value)return;Math.abs(_.value)>$e&&(_.value>0?L():z()),y.value=!1,_.value=0},Ye=e=>{e>=0&&e<m.value.length&&(g.value=e)},z=()=>{g.value<m.value.length-1&&g.value++},L=()=>{g.value>0&&g.value--},Oe=e=>{e.key==="ArrowLeft"?(e.preventDefault(),L()):e.key==="ArrowRight"&&(e.preventDefault(),z())},qe=yt(),$=rt(),H=pt(),Q=c(!1);u(()=>{const e=i.value;return e?.id?$.getQty(Number(e.id)):0});const B=c("");let j=null;const ce=e=>{B.value=e,j&&clearTimeout(j),j=setTimeout(()=>{B.value=""},1800)},Ze=()=>{if(!qe.isAuthenticated.value){const e=P.fullPath;return H.push(`/login?redirect=${encodeURIComponent(e)}`),!1}return!0},b=c(1),ve=async()=>{if(!Ze())return;const e=i.value;if(!e?.id)return;const t=await $.addItem({id:Number(e.id),name:e.name,price:Number(e.price||0),image:m.value[g.value]||k.value,slug:String(P.params.slug||"")},b.value);ce(t?"Added to cart":"Failed to update cart. Please try again.")},We=async()=>{await ve(),$.totalQty.value>0&&H.push("/cart")},U=u(()=>{const e=i.value?.discounts;if(!e?.enable)return null;const t=Number(e?.discount||0);return t>0?t:null}),de=u(()=>{const e=i.value?.category;return e==="plates"?"Plates":e==="bowls"?"Bowls":e==="mugs"?"Mugs":e==="vases"?"Vases":null});u(()=>i.value?.benefits||[]);const pe=u(()=>i.value?.lovePoints||[]),He=u(()=>{const e=[],t=i.value?.productDetails||[];for(const s of t){const n=s?.dimension?.name;if(!n||Z(n)==="type")continue;const d=s?.dimension?.unit||"",r=s?.value??"",h=d?`${r} ${d}`:String(r);e.push({key:n,value:h})}return e}),G=u(()=>{const e=i.value;return e?.reviewsMetaData?.reviews?Number(e.reviewsMetaData.reviews)||0:Array.isArray(e?.reviews)?e.reviews.length:0}),me=u(()=>{const e=i.value;if(e?.reviewsMetaData?.rating){const s=Number(e.reviewsMetaData.rating);return s>0?s.toFixed(1):"0.0"}const t=e?.reviews;if(Array.isArray(t)&&t.length>0){const s=t.map(n=>Number(n.rating||0)).filter(n=>n>0);if(s.length>0)return(s.reduce((d,r)=>d+r,0)/s.length).toFixed(1)}return"0.0"}),Qe=u(()=>{const e=Number(me.value);return Math.round(e)}),ge=u(()=>{const e=i.value;return e?(Array.isArray(e.productDetails)?e.productDetails:[]).map(s=>{const n=s?.dimension?.name,d=s?.value;return!n||!d?null:{id:s.id||`${n}-${d}`,label:n,value:d}}).filter(Boolean):[]}),w=c({material:!1,shipping:!1}),fe=e=>{w.value[e]=!w.value[e]},J=c(!1),f=c(1),C=c(0),M=c(0),K=c(!1),he=c(0),ye=c(0),je=()=>{J.value=!0,f.value=1,C.value=0,M.value=0,document.body.style.overflow="hidden"},be=()=>{J.value=!1,we(),document.body.style.overflow=""},Ge=()=>{f.value=Math.min(5,f.value+.5)},Je=()=>{f.value=Math.max(.5,f.value-.5),f.value<=1&&(C.value=0,M.value=0)},we=()=>{f.value=1,C.value=0,M.value=0},Ke=e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1,s=Math.max(.5,Math.min(5,f.value+t));f.value=s,s<=1&&(C.value=0,M.value=0)},et=e=>{f.value<=1||(K.value=!0,he.value=e.clientX-C.value,ye.value=e.clientY-M.value)},tt=e=>{!K.value||f.value<=1||(C.value=e.clientX-he.value,M.value=e.clientY-ye.value)},ke=()=>{K.value=!1},ee=e=>{const t=Number(e||0);try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(t)}catch{return`₹${t}`}},X=u(()=>String(O.app?.baseURL||"/")),E=u(()=>{const e=String(O.public.siteUrl||"").trim();return e?e.replace(/\/$/,""):xe.origin}),at=u(()=>String(P.path||"/")),S=u(()=>{const e=at.value.replace(/^\//,"");return Y(E.value,X.value,e)}),te=e=>{const t=String(e||"").trim();if(!t)return"";if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=t.replace(/^\//,"");return Y(E.value,X.value,s)},st=u(()=>{const e=new Date;return e.setMonth(e.getMonth()+2),e.toISOString().slice(0,10)}),ae=u(()=>{const e=i.value;if(!e)return null;const t=Number(e.price||0),s=U.value;return s?Math.round(t*(100-s)/100):t}),nt=u(()=>{const e=i.value;return e?(ae.value??Number(e.price||0))*Math.max(1,Number(b.value||1)):0}),_e=u(()=>(He.value||[]).map(t=>({"@type":"PropertyValue",name:t.key,value:t.value}))),ot=u(()=>{const e=Y(E.value,X.value),t=Y(E.value,X.value,"collections");return{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:e},{"@type":"ListItem",position:2,name:"Collections",item:t},{"@type":"ListItem",position:3,name:i.value?.name||"Product",item:S.value}]}}),Ce=u(()=>{const e=i.value;if(!e)return null;const t=e.description||e.about||"Handcrafted ceramic product.",s=(m.value.length?m.value:[oe(e.category)]).map(te).filter(Boolean),n=String(e.id??""),d={"@type":"Offer",url:S.value,priceCurrency:"INR",price:String(ae.value??Number(e.price||0)),priceValidUntil:st.value,availability:"https://schema.org/InStock",itemCondition:"https://schema.org/NewCondition",seller:{"@type":"Organization",name:"Ceramic Artistry"}};return{"@context":"https://schema.org","@graph":[ot.value,{"@type":"Product","@id":`${S.value}#product`,mainEntityOfPage:{"@type":"WebPage","@id":S.value},name:e.name,description:t,...s.length?{image:s}:{},...n?{sku:n}:{},...de.value?{category:de.value}:{},brand:{"@type":"Brand",name:"Ceramic Artistry"},offers:d,..._e.value.length?{additionalProperty:_e.value}:{}}]}});return V(()=>{i.value&&se({title:"Forest Green Ceramic Dinner Set (12 Pieces) | SVRVE",link:S.value?[{rel:"canonical",href:S.value}]:[],meta:[{name:"description",content:"Buy premium forest green ceramic dinner set (12 pieces). Microwave-safe, dishwasher-safe stoneware collection from SVRVE."},{property:"og:title",content:"Forest Green Ceramic Dinner Set (12 Pieces) | SVRVE"},{property:"og:description",content:"Buy premium forest green ceramic dinner set (12 pieces). Microwave-safe, dishwasher-safe stoneware collection from SVRVE."},...k.value?[{property:"og:image",content:te(k.value)}]:[]]})}),V(()=>{Ce.value&&se({script:[{key:"ld-product",type:"application/ld+json",children:JSON.stringify(Ce.value)}]})}),V(()=>{const e=k.value?te(k.value):"";e&&se({link:[{key:"preload-hero",rel:"preload",as:"image",href:e,fetchpriority:"high"}]})}),(e,t)=>{const s=lt,n=it,d=ut;return l(),o("div",bt,[t[26]||(t[26]=a("div",{class:"top-banner"},[a("p",{class:"banner-text"},"Designed to impress, Made to use")],-1)),a("header",wt,[a("button",{class:"menu-btn",type:"button","aria-label":"Menu",onClick:t[0]||(t[0]=r=>Q.value=!0)},[...t[9]||(t[9]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),F(s,{to:"/",class:"brand-logo"},{default:Me(()=>[...t[10]||(t[10]=[a("span",{class:"logo-text"},"SVRVE",-1),a("span",{class:"logo-dot"},"•",-1)])]),_:1}),a("div",kt,[a("button",{class:"cart-btn",type:"button",onClick:t[1]||(t[1]=r=>D(H).push("/cart")),"aria-label":"Cart"},[t[11]||(t[11]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),a("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),D($).totalQty.value?(l(),o("span",_t,v(D($).totalQty.value),1)):p("",!0)]),F(n)])]),F(d,{"is-open":Q.value,onClose:t[2]||(t[2]=r=>Q.value=!1)},null,8,["is-open"]),a("div",Ct,[D(Ne)?(l(),o("section",Mt,[...t[12]||(t[12]=[a("div",{class:"img-skel"},null,-1),a("div",{class:"line w-70"},null,-1),a("div",{class:"line w-90"},null,-1),a("div",{class:"line w-60"},null,-1)])])):D(Pe)||!i.value?(l(),o("section",St,[t[13]||(t[13]=a("h1",{class:"error-title"},"Couldn’t load product",-1)),t[14]||(t[14]=a("p",{class:"error-sub"}," Please check your backend and try again. ",-1)),a("button",{class:"retry",type:"button",onClick:t[3]||(t[3]=r=>D(Ie)())},"Retry")])):(l(),o("section",Dt,[a("div",$t,[a("div",{class:"image-swiper",tabindex:"0",onTouchstart:Ue,onTouchmove:Xe,onTouchend:Ee,onMousedown:Ve,onMousemove:Fe,onMouseup:ue,onMouseleave:ue,onKeydown:Oe},[a("div",{class:x(["image-container",{dragging:y.value}]),style:Se({transform:`translateX(calc(-${g.value*100}% + ${_.value}px))`})},[(l(!0),o(A,null,N(m.value,(r,h)=>(l(),o("img",{key:`gallery-${h}-${r}`,class:"hero-img",src:r,alt:`${i.value.name} image ${h+1}`,loading:h===0?"eager":"lazy",fetchpriority:h===0?"high":void 0,decoding:"async",referrerpolicy:"no-referrer",crossorigin:"anonymous"},null,8,xt))),128))],6),m.value.length>1?(l(),o("div",At,[g.value>0?(l(),o("button",{key:0,type:"button",class:"nav-btn nav-prev",onClick:L,"aria-label":"Previous image"},[...t[15]||(t[15]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M15 18l-6-6 6-6"})],-1)])])):p("",!0),g.value<m.value.length-1?(l(),o("button",{key:1,type:"button",class:"nav-btn nav-next",onClick:z,"aria-label":"Next image"},[...t[16]||(t[16]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M9 18l6-6-6-6"})],-1)])])):p("",!0)])):p("",!0),m.value.length>1?(l(),o("div",Nt,[(l(!0),o(A,null,N(m.value,(r,h)=>(l(),o("button",{key:`indicator-${h}`,type:"button",class:x(["indicator",{active:h===g.value}]),onClick:ia=>Ye(h),"aria-label":`Go to image ${h+1}`},null,10,Pt))),128))])):p("",!0),U.value?(l(),o("div",It,v(U.value)+"% OFF",1)):p("",!0),a("button",{type:"button",class:"zoom-btn",onClick:je,"aria-label":"Zoom image"},[...t[17]||(t[17]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"11",cy:"11",r:"8"}),a("path",{d:"m21 21-4.35-4.35"}),a("path",{d:"M11 8v6M8 11h6"})],-1)])])],32)]),a("div",Rt,[t[24]||(t[24]=a("div",{class:"product-header"},[a("span",{class:"handmade-tag"},"HANDMADE")],-1)),a("h1",Tt,v(i.value.name),1),a("div",zt,[a("div",Lt,[(l(),o(A,null,N(5,r=>a("span",{key:r,class:x(["star",{filled:r<=Qe.value}])},"★",2)),64))]),G.value>0?(l(),o("span",Bt,v(me.value)+"/5 ("+v(G.value)+" review"+v(G.value!==1?"s":"")+") ",1)):(l(),o("span",Ut,"No reviews yet"))]),a("div",Xt,[a("span",Et,v(ee(ae.value||i.value.price)),1),U.value?(l(),o("span",Vt,v(ee(i.value.price)),1)):p("",!0),b.value>1?(l(),o("span",Ft," for "+v(b.value)+" pcs · "+v(ee(nt.value)),1)):p("",!0)]),a("div",Yt,[t[18]||(t[18]=a("label",{class:"quantity-label"},"QUANTITY",-1)),a("div",Ot,[a("button",{class:"qty-btn",type:"button",onClick:t[4]||(t[4]=r=>b.value=Math.max(1,b.value-1)),"aria-label":"Decrease"}," − "),a("span",qt,v(b.value),1),a("button",{class:"qty-btn",type:"button",onClick:t[5]||(t[5]=r=>b.value++),"aria-label":"Increase"}," + ")])]),a("div",{class:"action-buttons"},[a("button",{class:"add-to-cart-btn",type:"button",onClick:ve}," ADD TO CART "),a("button",{class:"buy-now-btn",type:"button",onClick:We}," BUY IT NOW ")]),t[25]||(t[25]=a("div",{class:"shipping-info"},[a("p",null,"Dispatches within 3-4 business days. Cash on delivery available.")],-1)),i.value.description||i.value.about?(l(),o("div",Zt,[t[19]||(t[19]=a("h2",{class:"section-title"},"Description",-1)),a("p",Wt,v(i.value.description||i.value.about),1)])):p("",!0),pe.value.length>0?(l(),o("div",Ht,[t[20]||(t[20]=a("h2",{class:"section-title"},"Features",-1)),a("ul",Qt,[(l(!0),o(A,null,N(pe.value,r=>(l(),o("li",{key:r.id||r.value,class:"feature-item"},v(r.value),1))),128))])])):p("",!0),a("div",jt,[ge.value.length?(l(),o("div",{key:0,class:x(["expandable-section",{expanded:w.value.material}])},[a("button",{class:"section-header",type:"button",onClick:t[6]||(t[6]=r=>fe("material"))},[t[21]||(t[21]=a("span",null,"MATERIAL & SPECIFICATIONS",-1)),a("span",Gt,v(w.value.material?"−":"+"),1)]),w.value.material?(l(),o("div",Jt,[a("table",Kt,[a("tbody",null,[(l(!0),o(A,null,N(ge.value,r=>(l(),o("tr",{key:r.id,class:"spec-row"},[a("td",ea,v(r.label),1),a("td",ta,v(r.value),1)]))),128))])])])):p("",!0)],2)):p("",!0),a("div",{class:x(["expandable-section",{expanded:w.value.shipping}])},[a("button",{class:"section-header",type:"button",onClick:t[7]||(t[7]=r=>fe("shipping"))},[t[22]||(t[22]=a("span",null,"SHIPPING & RETURNS",-1)),a("span",aa,v(w.value.shipping?"−":"+"),1)]),w.value.shipping?(l(),o("div",sa,[...t[23]||(t[23]=[a("p",null,"Dispatches within 3-4 business days. Cash on delivery available. Easy returns within 7 days of delivery.",-1)])])):p("",!0)],2)])])])),F(mt,{name:"zoom-modal"},{default:Me(()=>[J.value?(l(),o("div",{key:0,class:"zoom-modal-overlay",onClick:be},[a("div",{class:"zoom-modal-content",onClick:t[8]||(t[8]=De(()=>{},["stop"]))},[a("button",{class:"zoom-close-btn",type:"button",onClick:be,"aria-label":"Close zoom"}," × "),a("div",{class:"zoom-image-container",onMousedown:et,onMousemove:tt,onMouseup:ke,onMouseleave:ke,onWheel:De(Ke,["prevent"])},[a("img",{src:m.value[g.value],alt:i.value.name,class:"zoom-image",style:Se({transform:`scale(${f.value}) translate(${C.value}px, ${M.value}px)`,transition:f.value<=1?"transform 0.3s":"none"})},null,12,na)],32),a("div",{class:"zoom-controls"},[a("button",{class:"zoom-control-btn",type:"button",onClick:Ge,"aria-label":"Zoom in"},"+"),a("button",{class:"zoom-control-btn",type:"button",onClick:Je,"aria-label":"Zoom out"},"−"),a("button",{class:"zoom-control-btn",type:"button",onClick:we,"aria-label":"Reset zoom"},"Reset")])])])):p("",!0)]),_:1})]),B.value?(l(),o("div",oa,v(B.value),1)):p("",!0)])}}},ha=ct(la,[["__scopeId","data-v-533a0ce2"]]);export{ha as default};
