import{_ as K}from"./BrXzo5Im.js";import{u as X,_ as G}from"./DmoxZqux.js";import{_ as Y}from"./DMDdKpbA.js";import{_ as Z,h as c,l as ee,u as te,c as i,a as s,b as k,w as B,e as l,t as u,f as p,p as se,v as ne,d as ae,F as C,r as w,g as S,o as r,y as oe,k as re,A as ie,j as le}from"./BymtEYvB.js";import{u as ce}from"./NMJN9T_Y.js";import"./Bbg1cLgB.js";const ue={class:"collection-page"},de={class:"topbar"},me={class:"topbar-actions"},pe={key:0,class:"cart-badge","aria-label":"Cart items"},ve={class:"controls"},ge={class:"search-row"},fe={class:"search"},ye={class:"count"},he={key:0},be={class:"collections-container","aria-labelledby":"collections-heading"},_e=["onClick"],ke={class:"chip-label"},Ce={class:"products-section"},we={class:"products-container"},$e={class:"product-image"},xe=["src","alt","loading","fetchpriority"],Ne={key:0,class:"discount-badge"},Be={class:"product-info"},Se={class:"product-name"},Ve={class:"product-price"},Fe={key:0,class:"empty-state",role:"alert"},Me={key:1,class:"empty-state"},Pe={__name:"index",setup(Re){const V=le(),v=c(()=>String(V.public.apiBase||"").replace(/\/$/,"")),F=ee(),f=te(),$=X(),y=S(!1),M=c(()=>"all"),d=S(""),P=[{id:"all",name:"All",icon:"âœ¨"},{id:"plates",name:"Plates",icon:"ðŸ½ï¸"},{id:"bowls",name:"Bowls",icon:"ðŸ¥£"},{id:"vases",name:"Vases",icon:"ðŸº"},{id:"mugs",name:"Mugs",icon:"â˜•"}],{data:R,pending:h,error:A,refresh:D}=ce("/collections",{baseURL:v},"$ycJxHo0KXd"),L=c(()=>{const t=R.value;return Array.isArray(t)?t:[]}),b=t=>String(t||"").trim().toLowerCase().replace(/\s+/g," "),U=t=>{const e=String(t||"").trim();return e?!!e.includes("img.icons8.com"):!1},I=t=>{const e=b(t);return e?e.includes("plate")?"plates":e.includes("bowl")?"bowls":e.includes("mug")||e.includes("cup")?"mugs":e.includes("vase")?"vases":null:null},T=t=>{const a=(Array.isArray(t?.productDetails)?t.productDetails:[]).find(o=>b(o?.dimension?.name)==="type");return I(a?.value)},z=t=>{const e=b(t);return e.includes("vase")?"vases":e.includes("mug")||e.includes("cup")?"mugs":e.includes("bowl")?"bowls":e.includes("plate")||e.includes("platter")||e.includes("dinner")?"plates":null},O=t=>t==="vases"?"/images/ceramic-vase.svg":t==="mugs"?"/images/ceramic-mug.svg":t==="plates"?"/images/ceramic-plate.svg":t==="bowls"?"/images/ceramic-bowl.svg":"/images/ceramic-plate.svg",_=t=>{const e=String(t||"").trim();if(!e||U(e))return"";if(e.includes("localhost:9090")||e.includes("localhost:"))try{const a=new URL(e),o=a.pathname+a.search;return`${v.value}${o}`}catch{const a=e.match(/localhost:\d+(\/.*)/);return a?`${v.value}${a[1]}`:e}return e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${v.value}${e}`:e},H=t=>{const e=t?.image?.value;if(e)return _(e);const a=Array.isArray(t?.images)?t.images:[],o=a.find(m=>m?.catalogImage);return o?.imageUrl?_(o.imageUrl):a[0]?.imageUrl?_(a[0].imageUrl):""},W=c(()=>L.value.map(t=>{const e=t?.name||"Ceramic Product",a=t?.description||t?.about||"",o=T(t)||z(e)||"plates",m=H(t),n=t?.discounts?.enable?Number(t?.discounts?.discount||0):0;return{id:t?.id,name:e,description:a,price:Number(t?.price||0),collection:o,image:m||O(o),discountPercent:n>0?n:null,raw:t}})),x=c(()=>W.value),g=c(()=>{const t=d.value.trim().toLowerCase();let e=x.value;return t?e.filter(a=>`${a.name} ${a.description}`.toLowerCase().includes(t)):e}),j=t=>{t==="all"?f.push("/collections"):f.push(`/collections/${t}`)},q=t=>{console.log("[Collections] Button clicked! Collection ID:",t),console.log("[Collections] Current route:",F.path),j(t)},E=t=>{const e=Number(t||0);try{return new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e)}catch{return String(e)}},Q=t=>String(t||"").toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),J=t=>`/product/${Q(t.name)}-${t.id}`;return(t,e)=>{const a=K,o=G,m=Y;return r(),i("div",ue,[e[16]||(e[16]=s("div",{class:"top-banner"},[s("p",{class:"banner-text"},"Designed to impress, Made to use")],-1)),s("header",de,[s("button",{class:"menu-btn",type:"button","aria-label":"Menu",onClick:e[0]||(e[0]=n=>y.value=!0)},[...e[6]||(e[6]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),k(a,{to:"/",class:"brand-logo"},{default:B(()=>[...e[7]||(e[7]=[s("span",{class:"logo-text"},"SVRVE",-1),s("span",{class:"logo-dot"},"â€¢",-1)])]),_:1}),s("div",me,[s("button",{class:"cart-btn",type:"button",onClick:e[1]||(e[1]=n=>l(f).push("/cart")),"aria-label":"Cart"},[e[8]||(e[8]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),s("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),l($).totalQty.value?(r(),i("span",pe,u(l($).totalQty.value),1)):p("",!0)]),k(o)])]),k(m,{"is-open":y.value,onClose:e[2]||(e[2]=n=>y.value=!1)},null,8,["is-open"]),s("section",ve,[e[10]||(e[10]=s("h2",{id:"collections-heading",class:"sr-only"},"Collections",-1)),s("div",ge,[s("div",fe,[e[9]||(e[9]=s("span",{class:"search-ic","aria-hidden":"true"},"âŒ•",-1)),se(s("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>d.value=n),class:"search-input",type:"search",autocomplete:"off",inputmode:"search",placeholder:"Search plates, mugs, vasesâ€¦","aria-label":"Search products"},null,512),[[ne,d.value]]),d.value?(r(),i("button",{key:0,class:"clear-btn",type:"button","aria-label":"Clear search",onClick:e[4]||(e[4]=n=>d.value="")}," Ã— ")):p("",!0)]),s("div",ye,[ae(u(g.value.length)+" item",1),g.value.length!==1?(r(),i("span",he,"s")):p("",!0)])]),s("div",be,[(r(),i(C,null,w(P,n=>s("button",{key:n.id,class:oe(["collection-chip",{active:M.value===n.id}]),type:"button",onClick:()=>q(n.id)},[s("span",ke,u(n.name),1)],10,_e)),64))])]),s("section",Ce,[e[15]||(e[15]=s("h2",{class:"products-title"},"Products",-1)),s("div",we,[l(h)&&x.value.length===0?(r(),i(C,{key:0},w(6,n=>s("div",{key:`sk-${n}`,class:"product-card skeleton","aria-hidden":"true"},[...e[11]||(e[11]=[re('<div class="product-image" data-v-d7585a41><div class="skeleton-block" data-v-d7585a41></div></div><div class="product-info" data-v-d7585a41><div class="skeleton-line w-80" data-v-d7585a41></div><div class="skeleton-line w-95" data-v-d7585a41></div><div class="skeleton-line w-60" data-v-d7585a41></div><div class="product-footer" data-v-d7585a41><div class="skeleton-line w-40" data-v-d7585a41></div><div class="skeleton-pill" data-v-d7585a41></div></div></div>',2)])])),64)):(r(!0),i(C,{key:1},w(g.value,(n,N)=>(r(),ie(a,{key:n.id,class:"product-card",to:J(n),"aria-label":`View ${n.name}`},{default:B(()=>[s("div",$e,[s("img",{class:"product-img",src:n.image,alt:n.name,loading:N<2?"eager":"lazy",decoding:"async",fetchpriority:N===0?"high":"auto",referrerpolicy:"no-referrer",crossorigin:"anonymous"},null,8,xe),n.discountPercent?(r(),i("span",Ne,u(n.discountPercent)+"% OFF",1)):p("",!0)]),s("div",Be,[s("h3",Se,u(n.name),1),s("div",Ve,"Rs. "+u(E(n.price)),1)])]),_:2},1032,["to","aria-label"]))),128))]),!l(h)&&l(A)?(r(),i("div",Fe,[e[12]||(e[12]=s("p",{class:"empty-title"},"Couldn't load products.",-1)),e[13]||(e[13]=s("p",{class:"empty-sub"},"Check if your backend is running and CORS is enabled, then try again.",-1)),s("button",{class:"retry-btn",type:"button",onClick:e[5]||(e[5]=n=>l(D)())},"Retry")])):!l(h)&&g.value.length===0?(r(),i("div",Me,[...e[14]||(e[14]=[s("p",{class:"empty-title"},"No products found.",-1),s("p",{class:"empty-sub"},"Try a different search or collection.",-1)])])):p("",!0)])])}}},ze=Z(Pe,[["__scopeId","data-v-d7585a41"]]);export{ze as default};
