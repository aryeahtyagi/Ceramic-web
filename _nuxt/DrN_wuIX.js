import{_ as ce}from"./CRWhLXmG.js";import{u as ue,_ as de}from"./B9bVLpYc.js";import{_ as me}from"./B8m7qWkO.js";import{_ as pe,e as d,l as ge,u as fe,q as ve,c as l,a as s,b as N,w as T,g as m,t as f,h as C,p as ye,v as he,d as be,F as P,r as V,i as we,j as E,o as r,y as Ce,k as _e,A as ke}from"./BP8Zqz1I.js";import{u as M}from"./t0VP3qzF.js";import{u as j}from"./EIUoMLvZ.js";import"./9Frihcan.js";const $e={class:"collection-page"},Se={class:"topbar"},xe={class:"topbar-actions"},Ie={key:0,class:"cart-badge","aria-label":"Cart items"},Ue={class:"controls"},Ne={class:"search-row"},Pe={class:"search"},Ve={class:"count"},Le={key:0},Be={class:"collections-container","aria-labelledby":"collections-heading"},De=["onClick"],Re={class:"chip-label"},Ae={class:"products-section"},Oe={class:"products-container"},Fe={class:"product-image"},Te=["src","alt","loading","fetchpriority"],Ee={key:0,class:"discount-badge"},Me={class:"product-info"},je={class:"product-name"},ze={class:"product-price"},He={key:0,class:"empty-state",role:"alert"},qe={key:1,class:"empty-state"},Je={__name:"index",setup(We){const L=we(),g=d(()=>String(L.public.apiBase||"").replace(/\/$/,""));console.log("ðŸ”§ API Base URL:",g.value);const z=ge(),k=fe(),B=ue(),$=E(!1),H=d(()=>"all"),v=E(""),{data:S,pending:Ke}=M("/collections/type",{baseURL:g},"$ycJxHo0KXd"),q=t=>{const e=String(t||"").toLowerCase();return e.includes("plate")?"ðŸ½ï¸":e.includes("bowl")?"ðŸ¥£":e.includes("vase")?"ðŸº":e.includes("mug")?"â˜•":"âœ¨"},J=d(()=>{const t=[{id:"all",name:"All",icon:"âœ¨",apiValue:null}];if(S.value&&Array.isArray(S.value)){const e=S.value.map(a=>{const o=String(a?.value||"").trim();return o?{id:o.toLowerCase().replace(/\s+/g,"-"),name:o,icon:q(o),apiValue:o}:null}).filter(Boolean);return[...t,...e]}return t}),W=d(()=>J.value),{data:K,pending:x,error:Q,refresh:X}=M("/collections",{baseURL:g},"$XKuswETN2M"),G=d(()=>{const t=K.value;return Array.isArray(t)?t:[]}),I=t=>String(t||"").trim().toLowerCase().replace(/\s+/g," "),Y=t=>{const e=String(t||"").trim();return e?!!e.includes("img.icons8.com"):!1},Z=t=>{const e=I(t);return e?e.includes("plate")?"plates":e.includes("bowl")?"bowls":e.includes("mug")||e.includes("cup")?"mugs":e.includes("vase")?"vases":null:null},ee=t=>{const a=(Array.isArray(t?.productDetails)?t.productDetails:[]).find(o=>I(o?.dimension?.name)==="type");return Z(a?.value)},te=t=>{const e=I(t);return e.includes("vase")?"vases":e.includes("mug")||e.includes("cup")?"mugs":e.includes("bowl")?"bowls":e.includes("plate")||e.includes("platter")||e.includes("dinner")?"plates":null},se=t=>t==="vases"?"/images/ceramic-vase.svg":t==="mugs"?"/images/ceramic-mug.svg":t==="plates"?"/images/ceramic-plate.svg":t==="bowls"?"/images/ceramic-bowl.svg":"/images/ceramic-plate.svg",y=t=>{const e=String(t||"").trim();if(!e||Y(e))return"";if(e.includes("localhost:9090")||e.includes("localhost:"))try{const a=new URL(e),o=a.pathname+a.search;return`${g.value}${o}`}catch{const a=e.match(/localhost:\d+(\/.*)/);return a?`${g.value}${a[1]}`:e}return e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${g.value}${e}`:e},ne=t=>{const e=t?.image?.value;if(e)return y(e);const a=Array.isArray(t?.images)?t.images:[],o=a.find(u=>u?.catalogImage);return o?.imageUrl?y(o.imageUrl):a[0]?.imageUrl?y(a[0].imageUrl):""},ae=d(()=>G.value.map(t=>{const e=t?.name||"Ceramic Product",a=t?.description||t?.about||"",o=ee(t)||te(e)||"plates",u=ne(t),n=t?.discounts?.enable?Number(t?.discounts?.discount||0):0;return{id:t?.id,name:e,description:a,price:Number(t?.price||0),collection:o,image:u||se(o),discountPercent:n>0?n:null,raw:t}})),D=d(()=>ae.value),h=d(()=>{const t=v.value.trim().toLowerCase();let e=D.value;return t?e.filter(a=>`${a.name} ${a.description}`.toLowerCase().includes(t)):e}),oe=t=>{t==="all"?k.push("/collections"):k.push(`/collections/${t}`)},ie=t=>{console.log("[Collections] Button clicked! Collection ID:",t),console.log("[Collections] Current route:",z.path),oe(t)},re=t=>{const e=Number(t||0);try{return new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e)}catch{return String(e)}},le=t=>String(t||"").toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),b=t=>`/product/${le(t.name)}-${t.id}`,w=L.public.siteUrl||(typeof window<"u"?window.location.origin:"");return ve([()=>h.value],([t])=>{if(!t||t.length===0)return;const e="Ceramic Collections - Handcrafted Ceramics",a="Discover beautiful handcrafted ceramic products. Shop unique dinnerware, vases, decorative pieces, and mugs.",o=typeof window<"u"?window.location.href:`${w}/collections`,u={"@context":"https://schema.org","@type":"CollectionPage",name:e,description:a,url:o,mainEntity:{"@type":"ItemList",numberOfItems:t.length,itemListElement:t.map((i,U)=>({"@type":"ListItem",position:U+1,item:{"@type":"Product","@id":typeof window<"u"?`${window.location.origin}${b(i)}`:`${w}${b(i)}`,name:i.name,description:i.description||""}}))}},n=t.map(i=>{const U=y(i.image),A=typeof window<"u"?`${window.location.origin}${b(i)}`:`${w}${b(i)}`,O=i.raw?.images?.find(p=>p.catalogImage)||i.raw?.images?.[0],F=O?.imageUrl?y(O.imageUrl):U,c={"@context":"https://schema.org","@type":"Product",name:i.name,description:i.description||i.raw?.about||"",image:F?[F]:void 0,url:A,sku:String(i.id),brand:{"@type":"Brand",name:"SVRVE"},category:"All Products",offers:{"@type":"Offer",price:String(i.price),priceCurrency:"INR",availability:"https://schema.org/InStock",url:A}};return i.discountPercent&&i.raw?.discounts&&(c.offers.priceValidUntil=new Date(Date.now()+1440*60*60*1e3).toISOString().split("T")[0]),Object.keys(c).forEach(p=>{c[p]===void 0&&delete c[p]}),c.offers&&Object.keys(c.offers).forEach(p=>{c.offers[p]===void 0&&delete c.offers[p]}),c}),_={"@context":"https://schema.org","@type":"Organization",name:"SVRVE",url:w,logo:`${w}/logo.png`,sameAs:[]},R=[{type:"application/ld+json",children:JSON.stringify(u)},{type:"application/ld+json",children:JSON.stringify(_)}];n.forEach(i=>{R.push({type:"application/ld+json",children:JSON.stringify(i)})}),j({title:e,meta:[{name:"description",content:a}],script:R})},{immediate:!0}),j({title:"Ceramic Collections - Handcrafted Ceramics",meta:[{name:"description",content:"Discover beautiful handcrafted ceramic products. Shop unique dinnerware, vases, decorative pieces, and mugs."}]}),(t,e)=>{const a=ce,o=de,u=me;return r(),l("div",$e,[e[16]||(e[16]=s("div",{class:"top-banner"},[s("p",{class:"banner-text"},"Designed to impress, Made to use")],-1)),s("header",Se,[s("button",{class:"menu-btn",type:"button","aria-label":"Menu",onClick:e[0]||(e[0]=n=>$.value=!0)},[...e[6]||(e[6]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),N(a,{to:"/",class:"brand-logo"},{default:T(()=>[...e[7]||(e[7]=[s("span",{class:"logo-text"},"SVRVE",-1),s("span",{class:"logo-dot"},"â€¢",-1)])]),_:1}),s("div",xe,[s("button",{class:"cart-btn",type:"button",onClick:e[1]||(e[1]=n=>m(k).push("/cart")),"aria-label":"Cart"},[e[8]||(e[8]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),s("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),m(B).totalQty.value?(r(),l("span",Ie,f(m(B).totalQty.value),1)):C("",!0)]),N(o)])]),N(u,{"is-open":$.value,onClose:e[2]||(e[2]=n=>$.value=!1)},null,8,["is-open"]),s("section",Ue,[e[10]||(e[10]=s("h2",{id:"collections-heading",class:"sr-only"},"Collections",-1)),s("div",Ne,[s("div",Pe,[e[9]||(e[9]=s("span",{class:"search-ic","aria-hidden":"true"},"âŒ•",-1)),ye(s("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>v.value=n),class:"search-input",type:"search",autocomplete:"off",inputmode:"search",placeholder:"Search plates, mugs, vasesâ€¦","aria-label":"Search products"},null,512),[[he,v.value]]),v.value?(r(),l("button",{key:0,class:"clear-btn",type:"button","aria-label":"Clear search",onClick:e[4]||(e[4]=n=>v.value="")}," Ã— ")):C("",!0)]),s("div",Ve,[be(f(h.value.length)+" item",1),h.value.length!==1?(r(),l("span",Le,"s")):C("",!0)])]),s("div",Be,[(r(!0),l(P,null,V(W.value,n=>(r(),l("button",{key:n.id,class:Ce(["collection-chip",{active:H.value===n.id}]),type:"button",onClick:()=>ie(n.id)},[s("span",Re,f(n.name),1)],10,De))),128))])]),s("section",Ae,[e[15]||(e[15]=s("h2",{class:"products-title"},"Products",-1)),s("div",Oe,[m(x)&&D.value.length===0?(r(),l(P,{key:0},V(6,n=>s("div",{key:`sk-${n}`,class:"product-card skeleton","aria-hidden":"true"},[...e[11]||(e[11]=[_e('<div class="product-image" data-v-d7e95c55><div class="skeleton-block" data-v-d7e95c55></div></div><div class="product-info" data-v-d7e95c55><div class="skeleton-line w-80" data-v-d7e95c55></div><div class="skeleton-line w-95" data-v-d7e95c55></div><div class="skeleton-line w-60" data-v-d7e95c55></div><div class="product-footer" data-v-d7e95c55><div class="skeleton-line w-40" data-v-d7e95c55></div><div class="skeleton-pill" data-v-d7e95c55></div></div></div>',2)])])),64)):(r(!0),l(P,{key:1},V(h.value,(n,_)=>(r(),ke(a,{key:n.id,class:"product-card",to:b(n),"aria-label":`View ${n.name}`},{default:T(()=>[s("div",Fe,[s("img",{class:"product-img",src:n.image,alt:n.name,loading:_<2?"eager":"lazy",decoding:"async",fetchpriority:_===0?"high":"auto",referrerpolicy:"no-referrer",crossorigin:"anonymous"},null,8,Te),n.discountPercent?(r(),l("span",Ee,f(n.discountPercent)+"% OFF",1)):C("",!0)]),s("div",Me,[s("h3",je,f(n.name),1),s("div",ze,"Rs. "+f(re(n.price)),1)])]),_:2},1032,["to","aria-label"]))),128))]),!m(x)&&m(Q)?(r(),l("div",He,[e[12]||(e[12]=s("p",{class:"empty-title"},"Couldn't load products.",-1)),e[13]||(e[13]=s("p",{class:"empty-sub"},"Check if your backend is running and CORS is enabled, then try again.",-1)),s("button",{class:"retry-btn",type:"button",onClick:e[5]||(e[5]=n=>m(X)())},"Retry")])):!m(x)&&h.value.length===0?(r(),l("div",qe,[...e[14]||(e[14]=[s("p",{class:"empty-title"},"No products found.",-1),s("p",{class:"empty-sub"},"Try a different search or collection.",-1)])])):C("",!0)])])}}},st=pe(Je,[["__scopeId","data-v-d7e95c55"]]);export{st as default};
