import{_ as J}from"./BrXzo5Im.js";import{u as K,_ as X}from"./DmoxZqux.js";import{_ as ee}from"./DMDdKpbA.js";import{_ as te,l as se,u as ae,h as u,q as F,c as i,a,b as V,w as R,e as C,t as p,f as g,p as ne,v as oe,d as re,F as N,r as B,g as y,o as l,y as le,k as ie,A as ce,j as ue}from"./BymtEYvB.js";import{u as de}from"./BAdZQPZD.js";import{u as me}from"./NMJN9T_Y.js";import{u as pe}from"./j9dONU5i.js";import"./Bbg1cLgB.js";const ve={class:"collection-page"},fe={class:"topbar"},ge={class:"topbar-actions"},ye={key:0,class:"cart-badge","aria-label":"Cart items"},he={class:"controls"},be={class:"search-row"},_e={class:"search"},Ce={class:"count"},we={key:0},ke={class:"collections-container","aria-labelledby":"collections-heading"},$e=["onClick","disabled"],xe={class:"chip-label"},Se={class:"products-section"},Le={class:"products-container"},Ve={class:"product-image"},Ne=["src","alt","loading","fetchpriority"],Be={key:0,class:"discount-badge"},Te={class:"product-info"},Ae={class:"product-name"},De={class:"product-price"},Fe={key:0,class:"error-state"},Re={key:1,class:"empty-state"},Ue={__name:"[type]",setup(Ie){const h=se(),w=ae();de();const U=ue(),v=u(()=>String(U.public.apiBase||"").replace(/\/$/,"")),T=K(),k=y(!1),d=y(""),c=u(()=>{const t=h.params.type;return!t||h.path==="/collections"||h.path==="/collections/"?"all":String(t).toLowerCase()}),{data:$,pending:I}=me("/collections/type",{baseURL:v},"$ZNgUTYaSg4"),M=t=>{const e=String(t||"").toLowerCase();return e.includes("plate")?"ðŸ½ï¸":e.includes("bowl")?"ðŸ¥£":e.includes("vase")?"ðŸº":e.includes("mug")?"â˜•":"âœ¨"},f=u(()=>{const t=[{id:"all",name:"All",icon:"âœ¨",apiValue:null}];if($.value&&Array.isArray($.value)){const e=$.value.map(n=>{const s=String(n?.value||"").trim();return s?{id:s.toLowerCase().replace(/\s+/g,"-"),name:s,icon:M(s),apiValue:s}:null}).filter(Boolean);return[...t,...e]}return t}),P=u(()=>f.value),z=t=>{if(!t||t==="all")return null;const e=String(t||"").toLowerCase().replace(/[-\s]+/g," "),n=f.value.find(r=>String(r.id||"").toLowerCase().replace(/[-\s]+/g," ")===e);if(n&&n.apiValue)return String(n.apiValue).trim().toLowerCase().replace(/\s+/g,"-");const s=String(t||"").toLowerCase();return s==="mug"||s==="mugs"||s.includes("mug")?"mugs":s==="vase"||s==="vases"||s.includes("vase")?"vases":s==="bowl"||s==="bowls"||s.includes("bowl")?"bowls":s==="plate"||s==="plates"||s.includes("plate")?"plates":null},b=y(!1),x=y(null),m=y([]),A=async()=>{const t=c.value,e=z(t);let n="/collections";t&&t!=="all"&&e&&(n=`/collections/type/${e}`),b.value=!0,x.value=null;try{const s=`${v.value}${n}`;console.log("[Collections Type] Fetching from:",s);const r=await $fetch(s,{method:"GET",headers:{accept:"*/*"}});Array.isArray(r)?m.value=r:m.value=[]}catch(s){console.error("[Collections Type] Failed to fetch:",s),x.value=s,m.value=[]}finally{b.value=!1}};F(()=>h.path,async(t,e)=>{(t!==e||!e)&&(d.value="",await A())},{immediate:!0}),F(c,(t,e)=>{t!==e&&(d.value="")},{immediate:!1});const S=t=>String(t||"").trim().toLowerCase().replace(/\s+/g," "),q=t=>{const e=String(t||"").trim();return e?!!e.includes("img.icons8.com"):!1},L=t=>{const e=String(t||"").trim();if(!e||q(e))return"";if(e.includes("localhost:9090")||e.includes("localhost:"))try{const n=new URL(e),s=n.pathname+n.search;return`${v.value}${s}`}catch{const n=e.match(/localhost:\d+(\/.*)/);return n?`${v.value}${n[1]}`:e}return e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${v.value}${e}`:e},H=t=>{const e=t?.image?.value;if(e)return L(e);const n=Array.isArray(t?.images)?t.images:[],s=n.find(r=>r?.catalogImage);return s?.imageUrl?L(s.imageUrl):n[0]?.imageUrl?L(n[0].imageUrl):""},E=t=>t==="vases"?"/images/ceramic-vase.svg":t==="mugs"?"/images/ceramic-mug.svg":t==="plates"?"/images/ceramic-plate.svg":t==="bowls"?"/images/ceramic-bowl.svg":"/images/ceramic-plate.svg",O=t=>{const n=(Array.isArray(t?.productDetails)?t.productDetails:[]).find(s=>S(s?.dimension?.name)==="type");return n?.value?S(n.value):null},W=t=>{const e=S(t);return e.includes("vase")?"vases":e.includes("mug")||e.includes("cup")?"mugs":e.includes("bowl")?"bowls":e.includes("plate")||e.includes("platter")||e.includes("dinner")?"plates":null},j=u(()=>m.value.map(t=>{const e=t?.name||"Ceramic Product",n=t?.description||t?.about||"",s=O(t)||W(e)||"plates",r=H(t),o=t?.discounts?.enable?Number(t?.discounts?.discount||0):0;return{id:t?.id,name:e,description:n,price:Number(t?.price||0),collection:s,image:r||E(s),discountPercent:o>0?o:null,raw:t}})),_=u(()=>{const t=d.value.trim().toLowerCase();let e=j.value;return t?e.filter(n=>`${n.name} ${n.description}`.toLowerCase().includes(t)):e}),Q=t=>{t==="all"?w.push("/collections"):w.push(`/collections/${t}`)},G=t=>{const e=Number(t||0);return`Rs. ${new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e)}`},Y=t=>String(t||"").toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),Z=t=>`/product/${Y(t.name)}-${t.id}`;return u(()=>{if(c.value==="all")return"Collections";const t=f.value.find(e=>e.id===c.value);return t?`${t.name} Collection`:"Collections"}),pe({title:u(()=>{if(c.value==="all")return"Ceramic Collections - Handcrafted Ceramics";const t=f.value.find(e=>e.id===c.value);return t?`${t.name} Collection - Handcrafted Ceramic ${t.name}`:"Ceramic Collections"}),meta:[{name:"description",content:u(()=>{if(c.value==="all")return"Discover beautiful handcrafted ceramic products. Shop unique dinnerware, vases, decorative pieces, and mugs.";const t=f.value.find(e=>e.id===c.value);return t?`Browse our collection of handcrafted ceramic ${t.name.toLowerCase()}. Each piece is carefully crafted by skilled artisans.`:"Discover beautiful handcrafted ceramic products."})},{name:"robots",content:"noindex, nofollow"}]}),(t,e)=>{const n=J,s=X,r=ee;return l(),i("div",ve,[e[13]||(e[13]=a("div",{class:"top-banner"},[a("p",{class:"banner-text"},"Designed to impress, Made to use")],-1)),a("header",fe,[a("button",{class:"menu-btn",type:"button","aria-label":"Menu",onClick:e[0]||(e[0]=o=>k.value=!0)},[...e[5]||(e[5]=[a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),V(n,{to:"/",class:"brand-logo"},{default:R(()=>[...e[6]||(e[6]=[a("span",{class:"logo-text"},"SVRVE",-1),a("span",{class:"logo-dot"},"â€¢",-1)])]),_:1}),a("div",ge,[a("button",{class:"cart-btn",type:"button",onClick:e[1]||(e[1]=o=>C(w).push("/cart")),"aria-label":"Cart"},[e[7]||(e[7]=a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),a("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),a("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),C(T).totalQty.value?(l(),i("span",ye,p(C(T).totalQty.value),1)):g("",!0)]),V(s)])]),V(r,{"is-open":k.value,onClose:e[2]||(e[2]=o=>k.value=!1)},null,8,["is-open"]),a("section",he,[e[9]||(e[9]=a("h2",{id:"collections-heading",class:"sr-only"},"Collections",-1)),a("div",be,[a("div",_e,[e[8]||(e[8]=a("span",{class:"search-ic","aria-hidden":"true"},"âŒ•",-1)),ne(a("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>d.value=o),class:"search-input",type:"search",autocomplete:"off",inputmode:"search",placeholder:"Search plates, mugs, vasesâ€¦","aria-label":"Search products"},null,512),[[oe,d.value]]),d.value?(l(),i("button",{key:0,class:"clear-btn",type:"button","aria-label":"Clear search",onClick:e[4]||(e[4]=o=>d.value="")}," Ã— ")):g("",!0)]),a("div",Ce,[re(p(_.value.length)+" item",1),_.value.length!==1?(l(),i("span",we,"s")):g("",!0)])]),a("div",ke,[(l(!0),i(N,null,B(P.value,o=>(l(),i("button",{key:o.id,class:le(["collection-chip",{active:c.value===o.id}]),type:"button",onClick:()=>Q(o.id),disabled:C(I)},[a("span",xe,p(o.name),1)],10,$e))),128))])]),a("section",Se,[a("div",Le,[b.value&&m.value.length===0?(l(),i(N,{key:0},B(6,o=>a("div",{key:`sk-${o}`,class:"product-card skeleton","aria-hidden":"true"},[...e[10]||(e[10]=[ie('<div class="product-image" data-v-ee66b4a9><div class="skeleton-block" data-v-ee66b4a9></div></div><div class="product-info" data-v-ee66b4a9><div class="skeleton-line w-80" data-v-ee66b4a9></div><div class="skeleton-line w-60" data-v-ee66b4a9></div></div>',2)])])),64)):(l(!0),i(N,{key:1},B(_.value,(o,D)=>(l(),ce(n,{key:o.id,class:"product-card",to:Z(o),"aria-label":`View ${o.name}`},{default:R(()=>[a("div",Ve,[a("img",{class:"product-img",src:o.image,alt:o.name,loading:D<2?"eager":"lazy",decoding:"async",fetchpriority:D===0?"high":"auto",referrerpolicy:"no-referrer",crossorigin:"anonymous"},null,8,Ne),o.discountPercent?(l(),i("span",Be,p(o.discountPercent)+"% OFF",1)):g("",!0)]),a("div",Te,[a("h3",Ae,p(o.name),1),a("span",De,p(G(o.price)),1)])]),_:2},1032,["to","aria-label"]))),128))]),x.value&&m.value.length===0?(l(),i("div",Fe,[e[11]||(e[11]=a("p",{class:"error-text"},"Couldn't load products.",-1)),a("button",{class:"retry-btn",type:"button",onClick:A},"Retry")])):!b.value&&_.value.length===0?(l(),i("div",Re,[...e[12]||(e[12]=[a("p",{class:"empty-title"},"No products found.",-1),a("p",{class:"empty-sub"},"Try a different search or collection.",-1)])])):g("",!0)])])}}},je=te(Ue,[["__scopeId","data-v-ee66b4a9"]]);export{je as default};
