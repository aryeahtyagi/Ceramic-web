import{_ as ue}from"./CRWhLXmG.js";import{u as de,_ as me}from"./B9bVLpYc.js";import{_ as pe}from"./B8m7qWkO.js";import{_ as fe,l as ge,u as ve,e as m,q as P,c,a as s,b as A,w as J,g as V,t as h,h as $,p as he,v as ye,d as be,F as R,r as F,i as we,j as k,o as l,y as Ce,k as _e,A as $e}from"./BP8Zqz1I.js";import{u as ke}from"./Slf2f_O5.js";import{u as Se}from"./t0VP3qzF.js";import{u as W}from"./EIUoMLvZ.js";import"./9Frihcan.js";const Le={class:"collection-page"},xe={class:"topbar"},Ve={class:"topbar-actions"},Ie={key:0,class:"cart-badge","aria-label":"Cart items"},Ne={class:"controls"},Ue={class:"search-row"},De={class:"search"},Te={class:"count"},Be={key:0},Pe={class:"collections-container","aria-labelledby":"collections-heading"},Ae=["onClick","disabled"],Re={class:"chip-label"},Fe={class:"products-section"},Ee={class:"products-container"},Oe={class:"product-image"},ze=["src","alt","loading","fetchpriority"],Me={key:0,class:"discount-badge"},je={class:"product-info"},He={class:"product-name"},qe={class:"product-price"},Je={key:0,class:"error-state"},We={key:1,class:"empty-state"},Qe={__name:"[type]",setup(Ge){const S=ge(),I=ve();ke();const E=we(),y=m(()=>String(E.public.apiBase||"").replace(/\/$/,"")),O=de(),N=k(!1),p=k(""),u=m(()=>{const t=S.params.type;return!t||S.path==="/collections"||S.path==="/collections/"?"all":String(t).toLowerCase()}),{data:U,pending:Q}=Se("/collections/type",{baseURL:y},"$ZNgUTYaSg4"),G=t=>{const e=String(t||"").toLowerCase();return e.includes("plate")?"ðŸ½ï¸":e.includes("bowl")?"ðŸ¥£":e.includes("vase")?"ðŸº":e.includes("mug")?"â˜•":"âœ¨"},g=m(()=>{const t=[{id:"all",name:"All",icon:"âœ¨",apiValue:null}];if(U.value&&Array.isArray(U.value)){const e=U.value.map(n=>{const a=String(n?.value||"").trim();return a?{id:a.toLowerCase().replace(/\s+/g,"-"),name:a,icon:G(a),apiValue:a}:null}).filter(Boolean);return[...t,...e]}return t}),Y=m(()=>g.value),Z=t=>{if(!t||t==="all")return null;const e=String(t||"").toLowerCase().replace(/[-\s]+/g," "),n=g.value.find(i=>String(i.id||"").toLowerCase().replace(/[-\s]+/g," ")===e);if(n&&n.apiValue)return String(n.apiValue).trim().toLowerCase().replace(/\s+/g,"-");const a=String(t||"").toLowerCase();return a==="mug"||a==="mugs"||a.includes("mug")?"mugs":a==="vase"||a==="vases"||a.includes("vase")?"vases":a==="bowl"||a==="bowls"||a.includes("bowl")?"bowls":a==="plate"||a==="plates"||a.includes("plate")?"plates":null},L=k(!1),D=k(null),v=k([]),z=async()=>{const t=u.value,e=Z(t);let n="/collections";t&&t!=="all"&&e&&(n=`/collections/type/${e}`),L.value=!0,D.value=null;try{const a=`${y.value}${n}`;console.log("[Collections Type] Fetching from:",a);const i=await $fetch(a,{method:"GET",headers:{accept:"*/*"}});Array.isArray(i)?v.value=i:v.value=[]}catch(a){console.error("[Collections Type] Failed to fetch:",a),D.value=a,v.value=[]}finally{L.value=!1}};P(()=>S.path,async(t,e)=>{(t!==e||!e)&&(p.value="",await z())},{immediate:!0}),P(u,(t,e)=>{t!==e&&(p.value="")},{immediate:!1});const T=t=>String(t||"").trim().toLowerCase().replace(/\s+/g," "),K=t=>{const e=String(t||"").trim();return e?!!e.includes("img.icons8.com"):!1},b=t=>{const e=String(t||"").trim();if(!e||K(e))return"";if(e.includes("localhost:9090")||e.includes("localhost:"))try{const n=new URL(e),a=n.pathname+n.search;return`${y.value}${a}`}catch{const n=e.match(/localhost:\d+(\/.*)/);return n?`${y.value}${n[1]}`:e}return e.startsWith("http://")||e.startsWith("https://")?e:e.startsWith("/")?`${y.value}${e}`:e},X=t=>{const e=t?.image?.value;if(e)return b(e);const n=Array.isArray(t?.images)?t.images:[],a=n.find(i=>i?.catalogImage);return a?.imageUrl?b(a.imageUrl):n[0]?.imageUrl?b(n[0].imageUrl):""},ee=t=>t==="vases"?"/images/ceramic-vase.svg":t==="mugs"?"/images/ceramic-mug.svg":t==="plates"?"/images/ceramic-plate.svg":t==="bowls"?"/images/ceramic-bowl.svg":"/images/ceramic-plate.svg",te=t=>{const n=(Array.isArray(t?.productDetails)?t.productDetails:[]).find(a=>T(a?.dimension?.name)==="type");return n?.value?T(n.value):null},ae=t=>{const e=T(t);return e.includes("vase")?"vases":e.includes("mug")||e.includes("cup")?"mugs":e.includes("bowl")?"bowls":e.includes("plate")||e.includes("platter")||e.includes("dinner")?"plates":null},se=m(()=>v.value.map(t=>{const e=t?.name||"Ceramic Product",n=t?.description||t?.about||"",a=te(t)||ae(e)||"plates",i=X(t),o=t?.discounts?.enable?Number(t?.discounts?.discount||0):0;return{id:t?.id,name:e,description:n,price:Number(t?.price||0),collection:a,image:i||ee(a),discountPercent:o>0?o:null,raw:t}})),w=m(()=>{const t=p.value.trim().toLowerCase();let e=se.value;return t?e.filter(n=>`${n.name} ${n.description}`.toLowerCase().includes(t)):e}),ne=t=>{t==="all"?I.push("/collections"):I.push(`/collections/${t}`)},oe=t=>{const e=Number(t||0);return`Rs. ${new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e)}`},re=t=>String(t||"").toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),C=t=>`/product/${re(t.name)}-${t.id}`,_=E.public.siteUrl||(typeof window<"u"?window.location.origin:"");return m(()=>{if(u.value==="all")return"Collections";const t=g.value.find(e=>e.id===u.value);return t?`${t.name} Collection`:"Collections"}),P([()=>w.value,()=>u.value],([t,e])=>{if(!t||t.length===0)return;const a=g.value.find(r=>r.id===e)?.name||"All Products",i=e==="all"?"Ceramic Collections - Handcrafted Ceramics":`${a} Collection - Handcrafted Ceramic ${a}`,o=e==="all"?"Discover beautiful handcrafted ceramic products. Shop unique dinnerware, vases, decorative pieces, and mugs.":`Browse our collection of handcrafted ceramic ${a.toLowerCase()}. Each piece is carefully crafted by skilled artisans.`,x=typeof window<"u"?window.location.href:`${_}/collections/${e}`,ie={"@context":"https://schema.org","@type":"CollectionPage",name:i,description:o,url:x,mainEntity:{"@type":"ItemList",numberOfItems:t.length,itemListElement:t.map((r,B)=>({"@type":"ListItem",position:B+1,item:{"@type":"Product","@id":typeof window<"u"?`${window.location.origin}${C(r)}`:`${_}${C(r)}`,name:r.name,description:r.description||""}}))}},le=t.map(r=>{const B=b(r.image),j=typeof window<"u"?`${window.location.origin}${C(r)}`:`${_}${C(r)}`,H=r.raw?.images?.find(f=>f.catalogImage)||r.raw?.images?.[0],q=H?.imageUrl?b(H.imageUrl):B,d={"@context":"https://schema.org","@type":"Product",name:r.name,description:r.description||r.raw?.about||"",image:q?[q]:void 0,url:j,sku:String(r.id),brand:{"@type":"Brand",name:"SVRVE"},category:a,offers:{"@type":"Offer",price:String(r.price),priceCurrency:"INR",availability:"https://schema.org/InStock",url:j}};return r.discountPercent&&r.raw?.discounts&&(d.offers.priceValidUntil=new Date(Date.now()+1440*60*60*1e3).toISOString().split("T")[0]),Object.keys(d).forEach(f=>{d[f]===void 0&&delete d[f]}),d.offers&&Object.keys(d.offers).forEach(f=>{d.offers[f]===void 0&&delete d.offers[f]}),d}),ce={"@context":"https://schema.org","@type":"Organization",name:"SVRVE",url:_,logo:`${_}/logo.png`,sameAs:[]},M=[{type:"application/ld+json",children:JSON.stringify(ie)},{type:"application/ld+json",children:JSON.stringify(ce)}];le.forEach(r=>{M.push({type:"application/ld+json",children:JSON.stringify(r)})}),W({title:i,meta:[{name:"description",content:o}],script:M})},{immediate:!0}),W({title:m(()=>{if(u.value==="all")return"Ceramic Collections - Handcrafted Ceramics";const t=g.value.find(e=>e.id===u.value);return t?`${t.name} Collection - Handcrafted Ceramic ${t.name}`:"Ceramic Collections"}),meta:[{name:"description",content:m(()=>{if(u.value==="all")return"Discover beautiful handcrafted ceramic products. Shop unique dinnerware, vases, decorative pieces, and mugs.";const t=g.value.find(e=>e.id===u.value);return t?`Browse our collection of handcrafted ceramic ${t.name.toLowerCase()}. Each piece is carefully crafted by skilled artisans.`:"Discover beautiful handcrafted ceramic products."})}]}),(t,e)=>{const n=ue,a=me,i=pe;return l(),c("div",Le,[e[13]||(e[13]=s("div",{class:"top-banner"},[s("p",{class:"banner-text"},"Designed to impress, Made to use")],-1)),s("header",xe,[s("button",{class:"menu-btn",type:"button","aria-label":"Menu",onClick:e[0]||(e[0]=o=>N.value=!0)},[...e[5]||(e[5]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M3 12h18M3 6h18M3 18h18"})],-1)])]),A(n,{to:"/",class:"brand-logo"},{default:J(()=>[...e[6]||(e[6]=[s("span",{class:"logo-text"},"SVRVE",-1),s("span",{class:"logo-dot"},"â€¢",-1)])]),_:1}),s("div",Ve,[s("button",{class:"cart-btn",type:"button",onClick:e[1]||(e[1]=o=>V(I).push("/cart")),"aria-label":"Cart"},[e[7]||(e[7]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),s("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),V(O).totalQty.value?(l(),c("span",Ie,h(V(O).totalQty.value),1)):$("",!0)]),A(a)])]),A(i,{"is-open":N.value,onClose:e[2]||(e[2]=o=>N.value=!1)},null,8,["is-open"]),s("section",Ne,[e[9]||(e[9]=s("h2",{id:"collections-heading",class:"sr-only"},"Collections",-1)),s("div",Ue,[s("div",De,[e[8]||(e[8]=s("span",{class:"search-ic","aria-hidden":"true"},"âŒ•",-1)),he(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),class:"search-input",type:"search",autocomplete:"off",inputmode:"search",placeholder:"Search plates, mugs, vasesâ€¦","aria-label":"Search products"},null,512),[[ye,p.value]]),p.value?(l(),c("button",{key:0,class:"clear-btn",type:"button","aria-label":"Clear search",onClick:e[4]||(e[4]=o=>p.value="")}," Ã— ")):$("",!0)]),s("div",Te,[be(h(w.value.length)+" item",1),w.value.length!==1?(l(),c("span",Be,"s")):$("",!0)])]),s("div",Pe,[(l(!0),c(R,null,F(Y.value,o=>(l(),c("button",{key:o.id,class:Ce(["collection-chip",{active:u.value===o.id}]),type:"button",onClick:()=>ne(o.id),disabled:V(Q)},[s("span",Re,h(o.name),1)],10,Ae))),128))])]),s("section",Fe,[s("div",Ee,[L.value&&v.value.length===0?(l(),c(R,{key:0},F(6,o=>s("div",{key:`sk-${o}`,class:"product-card skeleton","aria-hidden":"true"},[...e[10]||(e[10]=[_e('<div class="product-image" data-v-dc01f8a2><div class="skeleton-block" data-v-dc01f8a2></div></div><div class="product-info" data-v-dc01f8a2><div class="skeleton-line w-80" data-v-dc01f8a2></div><div class="skeleton-line w-60" data-v-dc01f8a2></div></div>',2)])])),64)):(l(!0),c(R,{key:1},F(w.value,(o,x)=>(l(),$e(n,{key:o.id,class:"product-card",to:C(o),"aria-label":`View ${o.name}`},{default:J(()=>[s("div",Oe,[s("img",{class:"product-img",src:o.image,alt:o.name,loading:x<2?"eager":"lazy",decoding:"async",fetchpriority:x===0?"high":"auto",referrerpolicy:"no-referrer",crossorigin:"anonymous"},null,8,ze),o.discountPercent?(l(),c("span",Me,h(o.discountPercent)+"% OFF",1)):$("",!0)]),s("div",je,[s("h3",He,h(o.name),1),s("span",qe,h(oe(o.price)),1)])]),_:2},1032,["to","aria-label"]))),128))]),D.value&&v.value.length===0?(l(),c("div",Je,[e[11]||(e[11]=s("p",{class:"error-text"},"Couldn't load products.",-1)),s("button",{class:"retry-btn",type:"button",onClick:z},"Retry")])):!L.value&&w.value.length===0?(l(),c("div",We,[...e[12]||(e[12]=[s("p",{class:"empty-title"},"No products found.",-1),s("p",{class:"empty-sub"},"Try a different search or collection.",-1)])])):$("",!0)])])}}},nt=fe(Qe,[["__scopeId","data-v-dc01f8a2"]]);export{nt as default};
